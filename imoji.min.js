var Imoji=new function(){this.input=null;this.emojis={};this.init=function(a){var b={emojis:"https://raw.githubusercontent.com/github/gemoji/master/db/emoji.json",input:null};a=$.extend(b,a);Imoji.input=a.input;$.getJSON(a.emojis,function(e){var d=0;while(d++<e.length){if(typeof e[d]!="undefined"&&e[d].hasOwnProperty("category")){var c=e[d].category;if(typeof Imoji.emojis[c]=="undefined"){Imoji.emojis[c]=[]}Imoji.emojis[c].push(e[d])}}Imoji.create();Imoji.render(Imoji.emojis)});$("[data-imoji]").click(function(){if(Imoji.input!=false){Imoji.input=$(this).closest("input")}Imoji.open()});$(".imoji-picker--search-trigger").click(function(){if($(".imoji-picker").hasClass("searching")){Imoji.hideSearch()}else{Imoji.showSearch()}});$(".imoji-picker--delete").click(function(){Imoji.deleteFromInput()});$("input.imoji-picker--search-input").on("input",function(){var c=$(this).val();if(c==""){Imoji.render(Imoji.emojis)}else{Imoji.search(c)}});$(".imoji-picker--search-delete").click(function(){$("input.imoji-picker--search-input").val("").focus()});$(document).mouseup(function(c){if(!$(".imoji-picker").is(c.target)&&$(".imoji-picker").has(c.target).length===0){Imoji.close()}});$(document).on("imoji:select",function(c,d){if($(Imoji.input).length>0){Imoji.updateInput(d.emoji)}})};this.create=function(){if($(Imoji.input).length>0){$("imoji-picker--footer").addClass("input-controls")}else{$("imoji-picker--footer").removeClass("input-controls")}var a=$(".imoji-picker--categories");$.each(Imoji.emojis,function(c,b){a.append('<div class="imoji-picker--categories-category imoji-icon" id="imoji-categories-footer--'+c+'">'+b[0].emoji+"</div>")});$(".imoji-picker--categories-category").click(function(){Imoji.scrollToCategory($(this).attr("id").replace("imoji-categories-footer--",""))})};this.render=function(a){var b=$(".imoji-picker--emojis");b.hide().empty();$.each(a,function(e,d){if(d.length>0){$("#imoji-categories-footer--"+e).removeClass("disabled");b.append('<div class="imoji-picker--emojis-category" id="imoji-categories--'+e+'"><h6>'+e+"</h6></div>");var c=b.find("#imoji-categories--"+e);$.each(d,function(f,g){c.append('<div class="imoji-picker--emojis-emoji imoji-icon imoji-icon--sm" id="imoji-emojis--'+g.aliases[0]+'">'+g.emoji+"</div>")})}else{$("#imoji-categories-footer--"+e).addClass("disabled")}});b.fadeIn(250);$(".imoji-picker--emojis-emoji").click(function(){var c=$(this).attr("id").replace("imoji-emojis--",""),d=[];$.each(Imoji.emojis,function(f,e){if(d.length==0){d=$.grep(e,function(g){return g.aliases[0]==c})}});Imoji.select(d[0])})};this.search=function(b){var a={};$.each(Imoji.emojis,function(d,c){a[d]=$.grep(c,function(h){var g=$.inArray(b,h.aliases)!=-1;var f=$.inArray(b,h.tags)!=-1;return g==true||f==true})});console.log(a);$(".imoji-picker--emojis").fadeOut(250,function(){Imoji.render(a)})};this.open=function(){$(document).trigger("imoji:open");if($(Imoji.input).length>0){$(".imoji-picker").focus()}$("body").addClass("imoji--open")};this.close=function(){$(document).trigger("imoji:close");$("body").removeClass("imoji--open")};this.select=function(a){$(document).trigger("imoji:select",[a])};this.updateInput=function(a){$(Imoji.input).val($(Imoji.input).val()+a)};this.deleteFromInput=function(){$(Imoji.input).val($(Imoji.input).val().slice(0,-1))};this.showSearch=function(){$(".imoji-picker--search").hide();$(".imoji-picker--emojis").animate({marginTop:"50px"},250,function(){$(".imoji-picker").addClass("searching");$(".imoji-picker--emojis").css("marginTop","0");$(".imoji-picker--search").fadeIn(250,function(){$("input.imoji-picker--search-input").focus()})})};this.hideSearch=function(){$(".imoji-picker--search").fadeOut(250,function(){$(".imoji-picker").removeClass("searching");$(".imoji-picker--emojis").css("marginTop","50px");$(".imoji-picker--emojis").animate({marginTop:"0"},250,function(){setTimeout(function(){Imoji.render(Imoji.emojis)},25)})})};this.scrollToCategory=function(b){var a=$(".imoji-picker--emojis").find("#imoji-categories--"+b),c=$(".imoji-picker--emojis").scrollTop()-$(".imoji-picker--emojis").offset().top;if(a.length>0){$(".imoji-picker--emojis").animate({scrollTop:a.offset().top+c},1000)}}};