/**!
 * @fileOverview Imoji.js - A sleek & responsive emoji input
 * @version 1.0.1
 * @license
 * MIT License
 *
 * Copyright (c) 2018 Jonas HÃ¼botter
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var Imoji=new function(){this.input=null;this.emojis={};this.init=function(a){var b={emojis:"https://raw.githubusercontent.com/github/gemoji/master/db/emoji.json",input:null};a=$.extend(b,a);Imoji.input=a.input;$.getJSON(a.emojis,function(e){var d=0;while(d++<e.length){if(typeof e[d]!="undefined"&&e[d].hasOwnProperty("category")){var c=e[d].category;if(typeof Imoji.emojis[c]=="undefined"){Imoji.emojis[c]=[]}Imoji.emojis[c].push(e[d])}}Imoji.create();Imoji.render(Imoji.emojis)});$("[data-imoji]").click(function(){if(Imoji.input!=false){Imoji.input=$(this).closest("input")}Imoji.open()});$(".imoji-picker--search-trigger").click(function(){if($(".imoji-picker").hasClass("searching")){Imoji.hideSearch()}else{Imoji.showSearch()}});$(".imoji-picker--delete").click(function(){Imoji.deleteFromInput();$(Imoji.input).focus()});$("input.imoji-picker--search-input").on("input",function(){var c=$(this).val();if(c==""){Imoji.render(Imoji.emojis)}else{Imoji.search(c)}});$(".imoji-picker--search-delete").click(function(){$("input.imoji-picker--search-input").val("").focus();Imoji.render(Imoji.emojis)});$(document).mouseup(function(c){if(!$(".imoji-picker").is(c.target)&&$(".imoji-picker").has(c.target).length===0){Imoji.close()}});$(document).on("imoji:select",function(c,d){if($(Imoji.input).length>0){Imoji.updateInput(d.emoji)}$(Imoji.input).focus()})};this.create=function(){var a=$(".imoji-picker--categories");$.each(Imoji.emojis,function(c,b){a.append('<div class="imoji-picker--categories-category imoji-icon" id="imoji-categories-footer--'+c+'">'+b[0].emoji+"</div>")});$(".imoji-picker--categories-category").click(function(){Imoji.scrollToCategory($(this).attr("id").replace("imoji-categories-footer--",""))})};this.render=function(a){var b=$(".imoji-picker--emojis");b.hide().empty();$.each(a,function(e,d){if(d.length>0){$("#imoji-categories-footer--"+e).removeClass("disabled");b.append('<div class="imoji-picker--emojis-category" id="imoji-categories--'+e+'"><h6>'+e+"</h6></div>");var c=b.find("#imoji-categories--"+e);$.each(d,function(f,g){c.append('<div class="imoji-picker--emojis-emoji imoji-icon imoji-icon--sm" id="imoji-emojis--'+g.aliases[0]+'">'+g.emoji+"</div>")})}else{$("#imoji-categories-footer--"+e).addClass("disabled")}});b.fadeIn(250);$(".imoji-picker--emojis-emoji").click(function(){var c=$(this).attr("id").replace("imoji-emojis--",""),d=[];$.each(Imoji.emojis,function(f,e){if(d.length==0){d=$.grep(e,function(g){return g.aliases[0]==c})}});Imoji.select(d[0])})};this.search=function(b){var a={};$.each(Imoji.emojis,function(d,c){a[d]=$.grep(c,function(g){var f=false;$.each(g.aliases,function(e,h){if(h.indexOf(b)!=-1){f=true}});$.each(g.tags,function(e,h){if(h.indexOf(b)!=-1){f=true}});return f})});$(".imoji-picker--emojis").fadeOut(250,function(){Imoji.render(a)})};this.open=function(){if($(Imoji.input).length>0){$(".imoji-picker--footer").addClass("input-controls")}else{$(".imoji-picker--footer").removeClass("input-controls")}$(document).trigger("imoji:open");$("body").addClass("imoji--open")};this.close=function(){$(document).trigger("imoji:close");$("body").removeClass("imoji--open")};this.select=function(a){$(document).trigger("imoji:select",[a])};this.updateInput=function(a){$(Imoji.input).val($(Imoji.input).val()+a)};this.deleteFromInput=function(){$(Imoji.input).val($(Imoji.input).val().slice(0,-1))};this.showSearch=function(){$(".imoji-picker--search").hide();$(".imoji-picker--emojis").animate({marginTop:"50px"},250,function(){$(".imoji-picker").addClass("searching");$(".imoji-picker--emojis").css("marginTop","0");$(".imoji-picker--search").fadeIn(250,function(){$("input.imoji-picker--search-input").focus()})})};this.hideSearch=function(){$(".imoji-picker--search").fadeOut(250,function(){$("input.imoji-picker--search-input").val("");$(".imoji-picker").removeClass("searching");$(".imoji-picker--emojis").css("marginTop","50px");$(".imoji-picker--emojis").animate({marginTop:"0"},250,function(){setTimeout(function(){Imoji.render(Imoji.emojis)},25)})})};this.scrollToCategory=function(b){var a=$(".imoji-picker--emojis").find("#imoji-categories--"+b),c=$(".imoji-picker--emojis").scrollTop()-$(".imoji-picker--emojis").offset().top;if(a.length>0){$(".imoji-picker--emojis").animate({scrollTop:a.offset().top+c},1000)}}};
