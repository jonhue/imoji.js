var Imoji=new function(){this.input=null;this.emojis={};this.init=function(a){var b={emojis:"https://raw.githubusercontent.com/github/gemoji/master/db/emoji.json",input:null};a=$.extend(b,a);Imoji.input=a.input;$.getJSON(a.emojis,function(e){var d=0;while(d++<e.length){if(typeof e[d]!="undefined"&&e[d].hasOwnProperty("category")){var c=e[d].category;if(typeof Imoji.emojis[c]=="undefined"){Imoji.emojis[c]=[]}Imoji.emojis[c].push(e[d])}}Imoji.render(Imoji.emojis)});$("[data-imoji]").click(function(){if(Imoji.input!=false){Imoji.input=$(this).closest("input")}Imoji.open()});$(".imoji-picker--search-trigger").click(function(){if($(".imoji-picker").hasClass("searching")){Imoji.hideSearch()}else{Imoji.showSearch()}});$(".imoji-picker--delete").click(function(){Imoji.deleteFromInput()});$(".imoji-picker--search-delete").click(function(){$("input.imoji-picker--search-input").val("").focus()});$(document).mouseup(function(c){if(!$(".imoji-picker").is(c.target)&&$(".imoji-picker").has(c.target).length===0){Imoji.close()}});$(document).on("imoji:select",function(c,d){if($(Imoji.input).length>0){Imoji.updateInput(d.emoji)}})};this.render=function(a){if($(Imoji.input).length>0){$("imoji-picker--footer").addClass("input-controls")}else{$("imoji-picker--footer").removeClass("input-controls")}var c=$(".imoji-picker--emojis");var b=$(".imoji-picker--categories");c.empty();b.empty();$.each(a,function(f,e){b.append('<div class="imoji-picker--categories-category imoji-icon" id="imoji-categories-footer--'+f+'">'+e[0].emoji+"</div>");c.append('<div class="imoji-picker--emojis-category" id="imoji-categories--'+f+'"><h6>'+f+"</h6></div>");var d=c.find("#imoji-categories--"+f);$.each(e,function(g,h){d.append('<div class="imoji-picker--emojis-emoji imoji-icon imoji-icon--sm" id="imoji-emojis--'+h.aliases[0]+'">'+h.emoji+"</div>")})});$(".imoji-picker--emojis-emoji").click(function(){$.each(Imoji.emojis,function(e,d){var f=$.grep(d,function(g){return g.aliases[0]==$(this).attr("id").replace("imoji-emojis--","")})});Imoji.select(emoji)});$(".imoji-picker--categories-category").click(function(){Imoji.scrollToCategory($(this).attr("id").replace("imoji-categories-footer--",""))})};this.open=function(){$(document).trigger("imoji:open");if($(Imoji.input).length>0){$(".imoji-picker").focus()}$("body").addClass("imoji--open")};this.close=function(){$(document).trigger("imoji:close");$("body").removeClass("imoji--open")};this.select=function(a){var b=jQuery.Event("imoji:select");b.data={emoji:a,};$(document).trigger(b)};this.updateInput=function(a){$(Imoji.input).val($(Imoji.input).val()+a)};this.deleteFromInput=function(){$(Imoji.input).val($(Imoji.input).val().slice(0,-1))};this.showSearch=function(){$(".imoji-picker--search").hide();$(".imoji-picker--emojis").animate({marginTop:"50px"},250,function(){$(".imoji-picker").addClass("searching");$(".imoji-picker--emojis").css("marginTop","0");$(".imoji-picker--search").fadeIn(250,function(){$("input.imoji-picker--search-input").focus()})})};this.hideSearch=function(){$(".imoji-picker--search").fadeOut(250,function(){$(".imoji-picker").removeClass("searching");$(".imoji-picker--emojis").css("marginTop","50px");$(".imoji-picker--emojis").animate({marginTop:"0"},250)})};this.scrollToCategory=function(a){var b=$(".imoji-picker--emojis").scrollTop()-$(".imoji-picker--emojis").offset().top;$(".imoji-picker--emojis").animate({scrollTop:$(".imoji-picker--emojis").find("#imoji-categories--"+a).offset().top+b},1000)}};